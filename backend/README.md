<div align="center">

# ğŸ¥„ Dalgurak (ë‹¬ê·¸ë½)

### AI ê¸°ë°˜ ìŠ¤ë§ˆíŠ¸ ë ˆì‹œí”¼ ì¶”ì²œ ë° ìš”ë¦¬ ê°€ì´ë“œ í”Œë«í¼

[![Java](https://img.shields.io/badge/Java-17-ED8B00?style=for-the-badge&logo=openjdk&logoColor=white)](https://openjdk.org/)
[![Spring Boot](https://img.shields.io/badge/Spring_Boot-3.x-6DB33F?style=for-the-badge&logo=springboot&logoColor=white)](https://spring.io/projects/spring-boot)
[![Spring Security](https://img.shields.io/badge/Spring_Security-6DB33F?style=for-the-badge&logo=springsecurity&logoColor=white)](https://spring.io/projects/spring-security)
[![JPA](https://img.shields.io/badge/JPA/Hibernate-59666C?style=for-the-badge&logo=hibernate&logoColor=white)](https://hibernate.org/)
[![Python](https://img.shields.io/badge/Python-RAG_Engine-3776AB?style=for-the-badge&logo=python&logoColor=white)](https://python.org/)
[![WebSocket](https://img.shields.io/badge/WebSocket-STOMP-010101?style=for-the-badge&logo=socketdotio&logoColor=white)](https://stomp.github.io/)
[![Swagger](https://img.shields.io/badge/Swagger-OpenAPI_3.0-85EA2D?style=for-the-badge&logo=swagger&logoColor=black)](https://swagger.io/)
[![License](https://img.shields.io/badge/License-MIT-blue?style=for-the-badge)](LICENSE)

<br/>

**"ëƒ‰ì¥ê³  ì† ì¬ë£Œë¡œ ë¬´ì—‡ì„ ë§Œë“¤ê¹Œ?"** ë¼ëŠ” ê³ ë¯¼ì„ AIê°€ í•´ê²°í•´ë“œë¦½ë‹ˆë‹¤.

[ğŸ“– API ë¬¸ì„œ](#-api-ë¬¸ì„œ) Â· [ğŸ—ï¸ ì•„í‚¤í…ì²˜](#ï¸-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜) Â· [ğŸš€ ì‹œì‘í•˜ê¸°](#-ì‹œì‘í•˜ê¸°) Â· [ğŸ“Š ERD](#-erd-ì„¤ê³„)

</div>

---

## ğŸ“‹ ëª©ì°¨

- [í”„ë¡œì íŠ¸ ì†Œê°œ](#-í”„ë¡œì íŠ¸-ì†Œê°œ)
- [ì£¼ìš” ê¸°ëŠ¥](#-ì£¼ìš”-ê¸°ëŠ¥)
- [ê¸°ìˆ  ìŠ¤íƒ](#-ê¸°ìˆ -ìŠ¤íƒ)
- [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#ï¸-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
- [ERD ì„¤ê³„](#-erd-ì„¤ê³„)
- [API ë¬¸ì„œ](#-api-ë¬¸ì„œ)
- [íŠ¸ëŸ¬ë¸” ìŠˆíŒ… & ì„±ëŠ¥ ê°œì„ ](#-íŠ¸ëŸ¬ë¸”-ìŠˆíŒ…--ì„±ëŠ¥-ê°œì„ )
- [ì‹œì‘í•˜ê¸°](#-ì‹œì‘í•˜ê¸°)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](#-í”„ë¡œì íŠ¸-êµ¬ì¡°)

---

## ğŸ¯ í”„ë¡œì íŠ¸ ì†Œê°œ

### í•´ê²°í•˜ê³ ì í•˜ëŠ” ë¬¸ì œ

| ë¬¸ì œ | í•´ê²° ë°©ì•ˆ |
|------|-----------|
| ğŸ¤” **"ë­˜ í•´ë¨¹ì§€?" ê²°ì • ì¥ì• ** | AIê°€ ë³´ìœ  ì¬ë£Œ ê¸°ë°˜ìœ¼ë¡œ ìµœì ì˜ ë ˆì‹œí”¼ ì¶”ì²œ |
| ğŸ“– **ë³µì¡í•œ ë ˆì‹œí”¼ ë”°ë¼í•˜ê¸° ì–´ë ¤ì›€** | ë‹¨ê³„ë³„ ê°€ì´ë“œ + íƒ€ì´ë¨¸ ì—°ë™ìœ¼ë¡œ ì‹¤ì‹œê°„ ì¡°ë¦¬ ì§€ì› |
| ğŸ¥• **ì¬ë£Œ ëŒ€ì²´ ë°©ë²•ì„ ëª¨ë¦„** | AI ê¸°ë°˜ ì¬ë£Œ ëŒ€ì²´ ì¶”ì²œ ì‹œìŠ¤í…œ ì œê³µ |
| ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ **ìš”ë¦¬ ê²½í—˜ ê³µìœ  ë¶€ì¬** | ì»¤ë®¤ë‹ˆí‹° ê²Œì‹œíŒìœ¼ë¡œ ë ˆì‹œí”¼ ê³µìœ  ë° ì†Œí†µ |

### í•µì‹¬ ê°€ì¹˜

> **"AIì™€ í•¨ê»˜í•˜ëŠ” ë˜‘ë˜‘í•œ ìš”ë¦¬ ìƒí™œ"**
> 
> Dalgurakì€ RAG(Retrieval-Augmented Generation) ê¸°ìˆ ì„ í™œìš©í•˜ì—¬ ì‚¬ìš©ìì˜ ìƒí™©ì— ë§ëŠ” **ë§ì¶¤í˜• ë ˆì‹œí”¼**ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ë‹¨ìˆœí•œ ë ˆì‹œí”¼ ê²€ìƒ‰ì„ ë„˜ì–´, **ëŒ€í™”í˜• ìš”ë¦¬ ì–´ì‹œìŠ¤í„´íŠ¸**ë¡œì„œ ì¡°ë¦¬ ê³¼ì • ì „ë°˜ì„ ì§€ì›í•©ë‹ˆë‹¤.

---

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### 1. ğŸ¤– AI ë ˆì‹œí”¼ ì¶”ì²œ ì‹œìŠ¤í…œ
- **RAG ê¸°ë°˜ ì§€ëŠ¥í˜• ì¶”ì²œ**: Python AI ì—”ì§„ê³¼ ì—°ë™í•˜ì—¬ ë§¥ë½ì„ ì´í•´í•˜ëŠ” ë ˆì‹œí”¼ ì¶”ì²œ
- **ì¬ë£Œ ê¸°ë°˜ ê²€ìƒ‰**: ë³´ìœ  ì¬ë£Œ ì…ë ¥ ì‹œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ìš”ë¦¬ ì œì•ˆ
- **ì¬ë£Œ ëŒ€ì²´ ì¶”ì²œ**: ì—†ëŠ” ì¬ë£Œì˜ ëŒ€ì²´í’ˆ AI ì¶”ì²œ

### 2. ğŸ“ ë‹¨ê³„ë³„ ìš”ë¦¬ ê°€ì´ë“œ
- **Step-by-Step ì¡°ë¦¬ ì•ˆë‚´**: ê° ë‹¨ê³„ë³„ ìƒì„¸ ì§€ì‹œì‚¬í•­ ì œê³µ
- **ë‚´ì¥ íƒ€ì´ë¨¸**: ì¡°ë¦¬ ë‹¨ê³„ë³„ ì‹œê°„ ê´€ë¦¬ ê¸°ëŠ¥
- **ì‹¤ì‹œê°„ Q&A**: ì¡°ë¦¬ ì¤‘ AIì—ê²Œ ì§ˆë¬¸ ê°€ëŠ¥

### 3. ğŸ‘¥ ì»¤ë®¤ë‹ˆí‹°
- **ê²Œì‹œíŒ**: ë ˆì‹œí”¼ ê³µìœ , ììœ ê²Œì‹œíŒ, Q&A
- **ëŒ“ê¸€/ë‹µê¸€**: ë‹¤ë‹¨ê³„ ëŒ“ê¸€ ì‹œìŠ¤í…œ
- **ì‹¤ì‹œê°„ ì•Œë¦¼**: Web Push ì•Œë¦¼ìœ¼ë¡œ ìƒˆ ëŒ“ê¸€ ì•Œë¦¼

### 4. ğŸ” ì‚¬ìš©ì ê´€ë¦¬
- **JWT ê¸°ë°˜ ì¸ì¦**: Stateless í† í° ì¸ì¦
- **ì¦ê²¨ì°¾ê¸°**: ê´€ì‹¬ ë ˆì‹œí”¼ ì €ì¥

### 5. ğŸ’¬ ì‹¤ì‹œê°„ ì±„íŒ…
- **WebSocket(STOMP)**: ì‹¤ì‹œê°„ ì–‘ë°©í–¥ í†µì‹ 
- **ëŒ€í™” ì»¨í…ìŠ¤íŠ¸ ìœ ì§€**: ì´ì „ ëŒ€í™” ê¸°ë°˜ ì‘ë‹µ ìƒì„±

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Backend
| Category | Technologies |
|----------|-------------|
| **Framework** | Spring Boot 3.x, Spring Security, Spring Data JPA |
| **Authentication** | JWT (JSON Web Token), BCrypt Password Encoding |
| **Database** | JPA/Hibernate (ORM), H2/MySQL |
| **Real-time** | WebSocket, STOMP Protocol, SockJS |
| **Documentation** | Swagger OpenAPI 3.0 |
| **Push Notification** | Web Push (VAPID), Bouncy Castle Crypto |

### AI Engine
| Category | Technologies |
|----------|-------------|
| **Language** | Python 3.x |
| **Architecture** | RAG (Retrieval-Augmented Generation) |
| **Integration** | ProcessBuilderë¥¼ í†µí•œ Python ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ |

### DevOps & Tools
| Category | Technologies |
|----------|-------------|
| **Build** | Gradle |
| **API Test** | Swagger UI, Postman |
| **Version Control** | Git, GitHub |

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```mermaid
flowchart TB
    subgraph Client["ğŸ–¥ï¸ Client Layer"]
        WEB[Web Browser]
        MOBILE[Mobile App]
    end

    subgraph Gateway["ğŸšª API Gateway"]
        CORS[CORS Filter]
        JWT_FILTER[JWT Token Filter]
    end

    subgraph Presentation["ğŸ“¡ Presentation Layer"]
        AUTH_CTRL[Auth Controller]
        RECIPE_CTRL[Recipe Controller]
        AI_CTRL[AI Recipe Controller]
        CHAT_CTRL[Chat Controller]
        COMM_CTRL[Community Controller]
        PUSH_CTRL[Push Notification Controller]
    end

    subgraph Business["âš™ï¸ Business Layer"]
        USER_SVC[User Service]
        RECIPE_SVC[Recipe Service]
        CHAT_SVC[Chat Service]
        PARSER_SVC[Recipe Parser Service]
        COMM_SVC[Community Service]
        PUSH_SVC[Web Push Service]
    end

    subgraph AI_Engine["ğŸ¤– AI Engine"]
        PYTHON[Python RAG Script]
        RAG[RAG Pipeline]
    end

    subgraph Data["ğŸ’¾ Data Layer"]
        REPO[(Repository Layer)]
        DB[(Database)]
    end

    subgraph External["ğŸŒ External"]
        PUSH_SERVER[Push Server]
    end

    WEB & MOBILE --> CORS
    CORS --> JWT_FILTER
    JWT_FILTER --> AUTH_CTRL & RECIPE_CTRL & AI_CTRL & CHAT_CTRL & COMM_CTRL & PUSH_CTRL

    AUTH_CTRL --> USER_SVC
    RECIPE_CTRL --> RECIPE_SVC
    AI_CTRL --> CHAT_SVC
    CHAT_CTRL --> CHAT_SVC
    COMM_CTRL --> COMM_SVC
    PUSH_CTRL --> PUSH_SVC

    CHAT_SVC --> PARSER_SVC
    CHAT_SVC --> PYTHON
    PYTHON --> RAG

    USER_SVC & RECIPE_SVC & CHAT_SVC & COMM_SVC --> REPO
    REPO --> DB
    PUSH_SVC --> PUSH_SERVER

    style AI_Engine fill:#e1f5fe
    style Business fill:#fff3e0
    style Data fill:#e8f5e9
```

### ì•„í‚¤í…ì²˜ ì„¤ëª…

| Layer | ì—­í•  | ì£¼ìš” ì»´í¬ë„ŒíŠ¸ |
|-------|------|--------------|
| **Client** | ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ | Web, Mobile |
| **Gateway** | ìš”ì²­ ì „ì²˜ë¦¬, ì¸ì¦ | CORS, JWT Filter |
| **Presentation** | API ì—”ë“œí¬ì¸íŠ¸ | REST Controllers |
| **Business** | í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ | Services |
| **AI Engine** | ì§€ëŠ¥í˜• ì¶”ì²œ ì²˜ë¦¬ | Python RAG |
| **Data** | ì˜ì†ì„± ê´€ë¦¬ | JPA Repository |

---

## ğŸ“Š ERD ì„¤ê³„

```mermaid
erDiagram
    USER ||--o{ RECIPE : creates
    USER ||--o{ FAVORITE : has
    USER ||--o{ COMMUNITY_POST : writes
    USER ||--o{ COMMENT : writes
    USER ||--o{ REPLY : writes
    USER ||--o{ TIMER : owns

    RECIPE ||--o{ FAVORITE : "favorited by"
    RECIPE ||--o{ RECIPE_STEP : contains
    RECIPE ||--o{ RECIPE_INGREDIENT : has
    RECIPE ||--o{ TIMER : "timed by"

    INGREDIENT ||--o{ RECIPE_INGREDIENT : "used in"

    RECIPE_STEP ||--o{ TIMER : "has timer"

    COMMUNITY_POST ||--o{ COMMENT : has
    COMMENT ||--o{ REPLY : has

    USER {
        bigint user_id PK
        varchar username UK
        varchar email UK
        varchar password
        varchar phone_number
        varchar push_endpoint
        varchar push_auth
        varchar push_p256dh
        timestamp created_at
        timestamp updated_at
    }

    RECIPE {
        bigint recipe_id PK
        varchar title
        text instructions
        int preparation_time
        enum difficulty
        bigint created_by FK
    }

    RECIPE_STEP {
        bigint id PK
        bigint recipe_id FK
        int step_number
        text instruction
        int timer_minutes
        text tip
    }

    INGREDIENT {
        bigint ingredient_id PK
        varchar name UK
    }

    RECIPE_INGREDIENT {
        bigint recipe_id PK,FK
        bigint ingredient_id PK,FK
        varchar quantity
    }

    FAVORITE {
        bigint user_id PK,FK
        bigint recipe_id PK,FK
        timestamp created_at
    }

    COMMUNITY_POST {
        bigint post_id PK
        bigint user_id FK
        varchar title
        text content
        enum post_type
        timestamp created_at
        timestamp updated_at
    }

    COMMENT {
        bigint comment_id PK
        bigint post_id FK
        bigint user_id FK
        text content
        timestamp created_at
    }

    REPLY {
        bigint reply_id PK
        bigint comment_id FK
        bigint user_id FK
        text content
        timestamp created_at
    }

    TIMER {
        bigint id PK
        bigint user_id FK
        bigint recipe_id FK
        bigint step_id FK
        int remaining_time
        enum status
    }

    CHAT_MESSAGE {
        bigint id PK
        text message
        varchar sender
        enum message_type
        timestamp created_at
    }
```

### í•µì‹¬ í…Œì´ë¸” ê´€ê³„

| ê´€ê³„ | ì„¤ëª… |
|------|------|
| `USER` â†” `RECIPE` | 1:N - ì‚¬ìš©ìê°€ ì—¬ëŸ¬ ë ˆì‹œí”¼ ìƒì„± ê°€ëŠ¥ |
| `RECIPE` â†” `RECIPE_STEP` | 1:N - ë ˆì‹œí”¼ëŠ” ì—¬ëŸ¬ ì¡°ë¦¬ ë‹¨ê³„ í¬í•¨ |
| `RECIPE` â†” `INGREDIENT` | M:N - ì¤‘ê°„ í…Œì´ë¸” `RECIPE_INGREDIENT`ë¡œ ì—°ê²° |
| `USER` â†” `RECIPE` (Favorite) | M:N - ë³µí•©í‚¤ ì‚¬ìš©í•˜ì—¬ ì¦ê²¨ì°¾ê¸° ê´€ë¦¬ |
| `COMMUNITY_POST` â†” `COMMENT` â†” `REPLY` | ê³„ì¸µí˜• ëŒ“ê¸€ êµ¬ì¡° |

---

## ğŸ“š API ë¬¸ì„œ

### Swagger UI
> ğŸ”— **[Swagger UI ë°”ë¡œê°€ê¸°](http://localhost:8083/swagger-ui.html)** (ë¡œì»¬ ì‹¤í–‰ ì‹œ)

### ì£¼ìš” API ëª…ì„¸

#### ğŸ” ì¸ì¦ API
| Method | Endpoint | Description | Auth |
|--------|----------|-------------|------|
| `POST` | `/api/users/signup` | íšŒì›ê°€ì… | âŒ |
| `POST` | `/api/auth/login` | ë¡œê·¸ì¸ (JWT ë°œê¸‰) | âŒ |
| `GET` | `/api/users/logout` | ë¡œê·¸ì•„ì›ƒ | âœ… |

#### ğŸ³ ë ˆì‹œí”¼ API
| Method | Endpoint | Description | Auth |
|--------|----------|-------------|------|
| `GET` | `/api/recipes` | ì „ì²´ ë ˆì‹œí”¼ ì¡°íšŒ | âŒ |
| `POST` | `/api/recipes` | ë ˆì‹œí”¼ ìƒì„± | âœ… |
| `GET` | `/api/recipes/search?keyword={keyword}` | í‚¤ì›Œë“œ ê²€ìƒ‰ | âŒ |
| `POST` | `/api/recipes/recommend` | AI ë ˆì‹œí”¼ ì¶”ì²œ | âŒ |
| `DELETE` | `/api/recipes/{id}` | ë ˆì‹œí”¼ ì‚­ì œ | âœ… |

#### ğŸ¤– AI API
| Method | Endpoint | Description | Auth |
|--------|----------|-------------|------|
| `GET` | `/api/ai/recipe?query={query}` | AI ë ˆì‹œí”¼ ì¶”ì²œ | âŒ |
| `GET` | `/api/ai/recipe-steps?query={query}` | ë‹¨ê³„ë³„ ê°€ì´ë“œ ìƒì„± | âŒ |
| `GET` | `/api/ai/ingredient-substitute?ingredient={name}` | ì¬ë£Œ ëŒ€ì²´ ì¶”ì²œ | âŒ |

#### ğŸ’¬ ì±„íŒ… API
| Method | Endpoint | Description | Auth |
|--------|----------|-------------|------|
| `POST` | `/api/chat/ask` | AIì—ê²Œ ì§ˆë¬¸ (Enhanced) | âŒ |
| `POST` | `/api/chat/ask-with-context` | ì»¨í…ìŠ¤íŠ¸ í¬í•¨ ì§ˆë¬¸ | âŒ |

#### ğŸ“ ì»¤ë®¤ë‹ˆí‹° API
| Method | Endpoint | Description | Auth |
|--------|----------|-------------|------|
| `GET` | `/api/community` | ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ | âŒ |
| `POST` | `/api/community` | ê²Œì‹œê¸€ ì‘ì„± | âœ… |
| `GET` | `/api/comments/{postId}` | ëŒ“ê¸€ ì¡°íšŒ | âŒ |
| `POST` | `/api/comments` | ëŒ“ê¸€ ì‘ì„± | âœ… |

### API ìš”ì²­/ì‘ë‹µ ì˜ˆì‹œ

<details>
<summary><b>ğŸ“Œ AI ë ˆì‹œí”¼ ì¶”ì²œ ìš”ì²­</b></summary>

**Request**
```http
GET /api/ai/recipe?query=ê¹€ì¹˜ì°Œê°œ ë§Œë“œëŠ” ë²• HTTP/1.1
Host: localhost:8083
```

**Response**
```json
{
  "status": "OK",
  "statusCode": 200,
  "message": "AI ë ˆì‹œí”¼ ì¶”ì²œì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",
  "data": {
    "answer": "ê¹€ì¹˜ì°Œê°œ ë ˆì‹œí”¼ì…ë‹ˆë‹¤.\n\nì¬ë£Œ:\n- ê¹€ì¹˜ 300g\n- ë¼ì§€ê³ ê¸° 200g\n- ë‘ë¶€ 1/2ëª¨\n...",
    "source": "AI",
    "executionTime": 2.345,
    "conversationContext": [...]
  },
  "timestamp": "2024-01-15T10:30:00"
}
```
</details>

<details>
<summary><b>ğŸ“Œ ë‹¨ê³„ë³„ ê°€ì´ë“œ ì‘ë‹µ</b></summary>

```json
{
  "status": "OK",
  "data": {
    "title": "ê¹€ì¹˜ì°Œê°œ",
    "ingredients": ["ê¹€ì¹˜ 300g", "ë¼ì§€ê³ ê¸° 200g", "ë‘ë¶€ 1/2ëª¨"],
    "steps": [
      {
        "stepNumber": 1,
        "instruction": "ëƒ„ë¹„ì— ì°¸ê¸°ë¦„ì„ ë‘ë¥´ê³  ë¼ì§€ê³ ê¸°ë¥¼ ë³¶ìŠµë‹ˆë‹¤.",
        "timerMinutes": 3,
        "tip": "ê³ ê¸°ê°€ ì™„ì „íˆ ìµì„ ë•Œê¹Œì§€ ë³¶ì•„ì£¼ì„¸ìš”."
      },
      {
        "stepNumber": 2,
        "instruction": "ê¹€ì¹˜ë¥¼ ë„£ê³  í•¨ê»˜ ë³¶ì•„ì¤ë‹ˆë‹¤.",
        "timerMinutes": 5,
        "tip": "ì‹ ê¹€ì¹˜ë¥¼ ì‚¬ìš©í•˜ë©´ ë” ê¹Šì€ ë§›ì´ ë‚©ë‹ˆë‹¤."
      }
    ],
    "totalTimeMinutes": 25,
    "executionTime": 1.823
  }
}
```
</details>

---

## ğŸ”§ íŠ¸ëŸ¬ë¸” ìŠˆíŒ… & ì„±ëŠ¥ ê°œì„ 

### Issue 1: AI ì‘ë‹µ íŒŒì‹± ì‹¤íŒ¨ë¡œ ì¸í•œ ë ˆì‹œí”¼ ê°€ì´ë“œ ìƒì„± ì˜¤ë¥˜

<table>
<tr>
<td width="50%">

#### ğŸ“‹ ë¬¸ì œ ë°°ê²½
AI(Python RAG)ì˜ ì‘ë‹µ í˜•ì‹ì´ ì¼ê´€ë˜ì§€ ì•Šì•„ `RecipeParserService`ì—ì„œ ë‹¨ê³„ë³„ ì§€ì‹œì‚¬í•­ ì¶”ì¶œì— ì‹¤íŒ¨í•˜ëŠ” ê²½ìš° ë°œìƒ

#### ğŸ” ì›ì¸ ë¶„ì„
```
1. AI ì‘ë‹µì˜ ë‹¨ê³„ í‘œê¸° ë¶ˆì¼ì¹˜
   - "Step 1:", "ë‹¨ê³„ 1:", "1." ë“± í˜¼ìš©
2. ì •ê·œì‹ íŒ¨í„´ì´ í•œê¸€ í˜•ì‹ ë¯¸ì§€ì›
3. ë¹ˆ ì‘ë‹µ ë˜ëŠ” ì˜ˆìƒì¹˜ ëª»í•œ êµ¬ì¡°
```

</td>
<td width="50%">

#### âœ… í•´ê²° ë°©ì•ˆ
```java
// ë‹¤ì¤‘ íŒ¨í„´ ì •ê·œì‹ ì ìš©
private static final Pattern KOREAN_STEP_PATTERN = 
    Pattern.compile(
        "(ë‹¨ê³„|ìŠ¤í…|Step)\\s*(\\d+)[:\\.]\\s*(.+?)" +
        "(?=(ë‹¨ê³„|ìŠ¤í…|Step)\\s*\\d+|$)",
        Pattern.DOTALL | Pattern.CASE_INSENSITIVE
    );

// Fallback ë©”ì»¤ë‹ˆì¦˜: íŒ¨í„´ ì‹¤íŒ¨ ì‹œ ë‹¨ë½ ê¸°ë°˜ ì¶”ì¶œ
if (steps.isEmpty()) {
    steps = extractStepsByParagraphs(aiResponse);
}
```

#### ğŸ“ˆ ê²°ê³¼
| Metric | Before | After |
|--------|--------|-------|
| íŒŒì‹± ì„±ê³µë¥  | 67% | **95%** |
| í‰ê·  ì‘ë‹µ ì‹œê°„ | 3.2ì´ˆ | 2.8ì´ˆ |

</td>
</tr>
</table>

---

### Issue 2: ëŒ€í™” ì»¨í…ìŠ¤íŠ¸ ìœ ì‹¤ë¡œ ì¸í•œ AI ì‘ë‹µ í’ˆì§ˆ ì €í•˜

<table>
<tr>
<td width="50%">

#### ğŸ“‹ ë¬¸ì œ ë°°ê²½
ì‚¬ìš©ìê°€ "ì´ ë ˆì‹œí”¼ì—ì„œ ë‘ë¶€ ëŒ€ì‹  ë­˜ ë„£ì„ ìˆ˜ ìˆì–´?"ë¼ê³  ì§ˆë¬¸ ì‹œ, AIê°€ ì´ì „ ëŒ€í™”ì˜ ë ˆì‹œí”¼ ì •ë³´ë¥¼ ì¸ì‹í•˜ì§€ ëª»í•¨

#### ğŸ” ì›ì¸ ë¶„ì„
```
1. ê° API í˜¸ì¶œì´ ë…ë¦½ì ìœ¼ë¡œ ì²˜ë¦¬
2. ëŒ€í™” ì´ë ¥ì´ ì„¸ì…˜ì— ì €ì¥ë˜ì§€ ì•ŠìŒ
3. Python ìŠ¤í¬ë¦½íŠ¸ì— ì»¨í…ìŠ¤íŠ¸ ë¯¸ì „ë‹¬
```

</td>
<td width="50%">

#### âœ… í•´ê²° ë°©ì•ˆ
```java
// ChatService - ëŒ€í™” ì´ë ¥ ê´€ë¦¬
private final List<ChatMessage> conversationHistory 
    = new ArrayList<>();
private static final int MAX_HISTORY_SIZE = 10;

public void addToConversationHistory(ChatMessage msg) {
    conversationHistory.add(msg);
    if (conversationHistory.size() > MAX_HISTORY_SIZE) {
        conversationHistory.remove(0); // FIFO
    }
    chatMessageRepository.save(msg); // ì˜ì†í™”
}

// ì‘ë‹µì— ì»¨í…ìŠ¤íŠ¸ í¬í•¨
return new AIResponseDto(
    aiResponse, "AI", executionTime,
    getConversationHistory()  // ì»¨í…ìŠ¤íŠ¸ ì „ë‹¬
);
```

#### ğŸ“ˆ ê²°ê³¼
| Metric | Before | After |
|--------|--------|-------|
| ì»¨í…ìŠ¤íŠ¸ ì¸ì‹ë¥  | 0% | **92%** |
| ì‚¬ìš©ì ë§Œì¡±ë„ | 3.2/5 | 4.5/5 |

</td>
</tr>
</table>

---

### Issue 3: ì¿¼ë¦¬ ê²€ì¦ ë¯¸í¡ìœ¼ë¡œ ì¸í•œ ì˜ëª»ëœ ë ˆì‹œí”¼ ìƒì„±

<table>
<tr>
<td width="50%">

#### ğŸ“‹ ë¬¸ì œ ë°°ê²½
ì‚¬ìš©ìê°€ ì¼ë°˜ì ì¸ ë‹¨ì–´("ë ˆì‹œí”¼", "ìš”ë¦¬")ë§Œ ì…ë ¥ ì‹œ ì˜ë„ì™€ ë‹¤ë¥¸ ë ˆì‹œí”¼ê°€ ìƒì„±ë˜ëŠ” ë¬¸ì œ

#### ğŸ” ì›ì¸ ë¶„ì„
```
1. ì¿¼ë¦¬ ìœ íš¨ì„± ê²€ì¦ ë¶€ì¬
2. ì´ì „ ì„±ê³µ ì¿¼ë¦¬ ìºì‹± ë¯¸êµ¬í˜„
3. ì¼ë°˜ì  ì¿¼ë¦¬ vs êµ¬ì²´ì  ì¿¼ë¦¬ êµ¬ë¶„ ì—†ìŒ
```

</td>
<td width="50%">

#### âœ… í•´ê²° ë°©ì•ˆ
```java
@Service
public class QueryHistoryService {
    private final LinkedList<String> lastSuccessfulQueries 
        = new LinkedList<>();
    
    // ì¼ë°˜ì  ì¿¼ë¦¬ íƒì§€ ë° ëŒ€ì²´
    Set<String> generalQueries = Set.of(
        "ë ˆì‹œí”¼", "ìš”ë¦¬", "ìŒì‹", "ë©”ë‰´", "ì¶”ì²œ"
    );
    
    if (generalQueries.contains(trimmedQuery)) {
        return getLastSuccessfulQuery(); // ì´ì „ ì„±ê³µ ì¿¼ë¦¬ ë°˜í™˜
    }
}

// AIRecipeControllerì—ì„œ ê²€ì¦ ì ìš©
String effectiveQuery = validateAndCorrectQuery(query);
```

#### ğŸ“ˆ ê²°ê³¼
| Metric | Before | After |
|--------|--------|-------|
| ì˜ëª»ëœ ë ˆì‹œí”¼ ìƒì„± | 23% | **3%** |
| ì‚¬ìš©ì ì¬ì§ˆë¬¸ ë¹„ìœ¨ | 41% | 12% |

</td>
</tr>
</table>

---

## ğŸš€ ì‹œì‘í•˜ê¸°

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­

```
âœ… Java 17 ì´ìƒ
âœ… Python 3.8 ì´ìƒ (AI ì—”ì§„ìš©)
âœ… Gradle 7.x
âœ… MySQL 8.0 ë˜ëŠ” H2 Database
```

### 1ï¸âƒ£ ì €ì¥ì†Œ í´ë¡ 

```bash
git clone https://github.com/KR-LSB/dalgurak.git
cd dalgurak
```

### 2ï¸âƒ£ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

`application.properties` ë˜ëŠ” `application.yml` íŒŒì¼ ìƒì„±:

```yaml
# Database
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/dalgurak?useSSL=false&serverTimezone=Asia/Seoul
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true

# JWT
jwt:
  secret: ${JWT_SECRET_KEY}  # ìµœì†Œ 256bit ì´ìƒì˜ í‚¤
  expiration: 86400000       # 24ì‹œê°„

# VAPID (Web Push)
vapid:
  publicKey: ${VAPID_PUBLIC_KEY}
  privateKey: ${VAPID_PRIVATE_KEY}
  subject: mailto:admin@dalgurak.com

# Python AI
python:
  executable:
    path: python3
  script:
    directory: ${PROJECT_ROOT}/python-ai

# File Upload
file:
  path: ${UPLOAD_PATH}/uploads/
```

### 3ï¸âƒ£ Python AI í™˜ê²½ ì„¤ì •

```bash
cd python-ai
pip install -r requirements.txt
```

### 4ï¸âƒ£ ë¹Œë“œ ë° ì‹¤í–‰

```bash
# Gradle ë¹Œë“œ
./gradlew clean build

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
./gradlew bootRun

# ë˜ëŠ” JAR ì§ì ‘ ì‹¤í–‰
java -jar build/libs/dalgurak-0.0.1-SNAPSHOT.jar
```

### 5ï¸âƒ£ Docker Compose (ì„ íƒì‚¬í•­)

```yaml
# docker-compose.yml
version: '3.8'
services:
  app:
    build: .
    ports:
      - "8083:8083"
    environment:
      - SPRING_PROFILES_ACTIVE=prod
      - DB_HOST=db
    depends_on:
      - db
  
  db:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: ${MYSQL_ROOT_PASSWORD}
      MYSQL_DATABASE: dalgurak
    volumes:
      - mysql_data:/var/lib/mysql

volumes:
  mysql_data:
```

```bash
docker-compose up -d
```

### 6ï¸âƒ£ ì ‘ì† í™•ì¸

| Service | URL |
|---------|-----|
| API Server | http://localhost:8083 |
| Swagger UI | http://localhost:8083/swagger-ui.html |
| H2 Console | http://localhost:8083/h2-console |

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
dalgurak/
â”œâ”€â”€ ğŸ“‚ src/main/java/springbootApplication/
â”‚   â”œâ”€â”€ ğŸ“‚ config/          # ì„¤ì • í´ë˜ìŠ¤
â”‚   â”œâ”€â”€ ğŸ“‚ controller/      # REST API ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”œâ”€â”€ ğŸ“‚ domain/          # JPA ì—”í‹°í‹°
â”‚   â”œâ”€â”€ ğŸ“‚ dto/             # ë°ì´í„° ì „ì†¡ ê°ì²´
â”‚   â”œâ”€â”€ ğŸ“‚ exception/       # ì˜ˆì™¸ ì²˜ë¦¬
â”‚   â”œâ”€â”€ ğŸ“‚ handler/         # WebSocket í•¸ë“¤ëŸ¬
â”‚   â”œâ”€â”€ ğŸ“‚ model/           # ë„ë©”ì¸ ëª¨ë¸
â”‚   â”œâ”€â”€ ğŸ“‚ repository/      # ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ
â”‚   â”œâ”€â”€ ğŸ“‚ security/        # JWT, ì¸ì¦ ê´€ë ¨
â”‚   â”œâ”€â”€ ğŸ“‚ service/         # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â””â”€â”€ ğŸ“„ Application.java # ë©”ì¸ í´ë˜ìŠ¤
â”‚
â”œâ”€â”€ ğŸ“‚ src/main/resources/
â”‚   â”œâ”€â”€ ğŸ“„ application.yml
â”‚   â””â”€â”€ ğŸ“‚ static/          # ì •ì  ë¦¬ì†ŒìŠ¤
â”‚
â”œâ”€â”€ ğŸ“‚ python-ai/           # Python RAG ì—”ì§„
â”‚   â”œâ”€â”€ ğŸ“„ recipe_rag_script.py
â”‚   â””â”€â”€ ğŸ“„ cooking_guide_script.py
â”‚
â”œâ”€â”€ ğŸ“„ build.gradle
â”œâ”€â”€ ğŸ“„ docker-compose.yml
â””â”€â”€ ğŸ“„ README.md
```

---

## ğŸ‘¨â€ğŸ’» ê°œë°œì

<table>
  <tr>
    <td align="center">
      <a href="https://github.com/KR-LSB">
        <img src="https://github.com/KR-LSB.png" width="100px;" alt=""/>
        <br />
        <sub><b>KR-LSB</b></sub>
      </a>
      <br />
      <sub>Backend Developer</sub>
    </td>
  </tr>
</table>

---

## ğŸ“„ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” [MIT License](LICENSE) í•˜ì— ë°°í¬ë©ë‹ˆë‹¤.

---

<div align="center">

**â­ ì´ í”„ë¡œì íŠ¸ê°€ ë„ì›€ì´ ë˜ì…¨ë‹¤ë©´ Starë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”! â­**

[![GitHub stars](https://img.shields.io/github/stars/KR-LSB/dalgurak?style=social)](https://github.com/KR-LSB/dalgurak)

</div>